(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(30)},24:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),o=n.n(i),l=(n(24),n(1)),c=n(2),s=n(4),d=n(3),u=n(5),p=n(8),h=n(6),m=(n(29),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).progressLoader=n.progressLoader.bind(Object(p.a)(n)),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=window.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Points &copy 2012 LINZ'}),t=window.L.latLng(12.92415,77.67229);this.map=window.L.map("map",{center:t,zoom:13,layers:[e]}),this.markers=window.L.markerClusterGroup({chunkedLoading:!0,chunkProgress:this.progressLoader})}},{key:"shouldComponentUpdate",value:function(e){if(e.state){var t=[],n=e.state.json.allIds;e.state.currentFilter&&(n=e.state.filtered[e.state.currentFilter.type][e.state.currentFilter.id]),this.markers.clearLayers(),n.map(function(n){var a=e.state.json.data[n],r=a.from_lat,i=a.from_long;if(r&&i){var o=new window.L.marker([r,i]);t.push(o)}}),this.markers.addLayers(t),this.map.addLayer(this.markers);var a=new window.L.featureGroup(t);this.map.fitBounds(a.getBounds())}return!1}},{key:"progressLoader",value:function(e,t,n,a){n>1e3&&console.log(" ==================== loading : ",Math.round(e/t*100)+"%")}},{key:"render",value:function(){return r.a.createElement("div",{id:"map"})}}]),t}(r.a.Component)),f=Object(h.b)(function(e){return{state:e}})(m),g=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(d.a)(t).call(this,e))).onChangeHandler=n.onChangeHandler.bind(Object(p.a)(n)),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onChangeHandler",value:function(e){var t=e.target.files[0],n=new FileReader,a=this;n.onload=function(e){var t=e.target.result;a.props.getData(t)},n.readAsText(t)}},{key:"render",value:function(){return r.a.createElement("div",{style:{float:"right",display:"inline-block",paddingTop:"30px"}},this.props.state&&this.props.state.currentFilter&&r.a.createElement("button",{className:"btn btn-default",style:{margin:"10px 10px 10px 0"},onClick:this.props.resetFilters},"Reset Filters"),!this.props.state&&r.a.createElement("input",{id:"selectFileButton",type:"file",accept:".csv, text/csv",multiple:"",onChange:this.onChangeHandler}))}}]),t}(r.a.Component),y=Object(h.b)(function(e){return{state:e}},function(e){return{getData:function(t){e({type:"STORE_DATA",payload:t})},resetFilters:function(){e({type:"RESET_FILTER"})}}})(g),b=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.params,n=t.title,a=t.id,r=t.data,i=e.callback;window.Highcharts.chart(a,{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:n},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0,point:{events:{click:function(){i(this.id)}}}}},credits:{enabled:!1},series:r})}},{key:"render",value:function(){return r.a.createElement("div",{id:this.props.params.id,style:{width:500,height:200}})}}]),t}(r.a.Component),v=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t,n=this.props,a=n.data,i=n.getData;return a?r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement("h3",{style:{textAlign:"center"}},"Package bookings"),r.a.createElement(b,{callback:function(e){return i({type:"package_id",id:e})},params:(t=a.package_id,{id:"packagePie",data:[{name:"Packages",colorByPoint:!0,data:[{name:"Package 1",y:t[1]?t[1].length:0,id:1},{name:"Package 2",y:t[2]?t[2].length:0,id:2},{name:"Package 3",y:t[3]?t[3].length:0,id:3},{name:"Package 4",y:t[4]?t[4].length:0,id:4},{name:"Package 5",y:t[5]?t[5].length:0,id:5},{name:"Package 6",y:t[6]?t[6].length:0,id:6},{name:"Package 7",y:t[7]?t[7].length:0,id:7},{name:"Others",y:t.others?t.others.length:0,id:"others"}]}],title:""})})),r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement("h3",{style:{textAlign:"center"}},"Bookings for different travel types"),r.a.createElement(b,{callback:function(e){return i({type:"travel_type_id",id:e})},params:(e=a.travel_type_id,{id:"travelChart",data:[{name:"Travel",colorByPoint:!0,data:[{name:"Long distance",y:e[1].length,id:1},{name:"Point to Point",y:e[2].length,id:2},{name:"Hourly rental",y:e[3].length,id:3}]}],title:""})}))):null}}]),t}(r.a.Component),k=Object(h.b)(function(e){return{data:e?e.filtered:null}},function(e){return{getData:function(t){e({type:"FILTER_POINT",payload:t})}}})(v),O=n(11),w=n(15),j=/\r?\n/,_=function(e){if(e.length>0)for(var t=0;t<e.length;t++)if(e[t])return!0;return!1},E=function(e){return e.replace(/\s/g,"")},L=function(e){return!isNaN(e)?Number(e):"NULL"===e?null:String(e)},C=function(e,t){for(var n={},a=0;a<e.length;a++){var r=E(e[a]),i=t[a];i=L(t[a]),n[r]=i}return n},P=["user_id","package_id","vehicle_model_id","travel_type_id","from_area_id","to_area_id","from_city_id","to_city_id","online_booking","mobile_site_booking","Car_Cancellation"],F=function(e){var t=function(e,t){var n=e.split(j),a=n[0].split(","),r={data:{},allIds:[],length:0},i={},o={};t.forEach(function(e){o[e]={}});for(var l=1;l<n.length;l++){var c=n[l].split(",");_(c)&&(i=C(a,c),r.data[i.id]=i,r.allIds.push(i.id),r.length+=1,t.forEach(function(e){var t=null===i[e]?"others":i[e];o[e][t]=o[e][t]||[],o[e][t].push(i.id)}))}return{json:r,filtered:o}}(e,P),n={};return Object.keys(t.filtered.package_id).map(function(e){var a=t.filtered.package_id[e];n[e]=a.filter(function(e){return-1!==t.filtered.Car_Cancellation[1].indexOf(e)})}),t.filtered.Car_Cancellation.cancelledPackageBookings=n,t},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_DATA":return F(t.payload);case"FILTER_POINT":return Object(w.a)({},e,{currentFilter:{type:t.payload.type,id:t.payload.id}});case"RESET_FILTER":return Object(w.a)({},e,{currentFilter:null});default:return e}},x=Object(O.b)(T),I=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,{store:x},r.a.createElement("div",{className:"App"},r.a.createElement("div",{style:{display:"inline-block",width:"100%"}},r.a.createElement("h1",{style:{marginLeft:5,display:"inline-block"}},"Interactive Map demo"),r.a.createElement(y,null)),r.a.createElement(f,null),r.a.createElement(k,null)))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.ed3a560f.chunk.js.map